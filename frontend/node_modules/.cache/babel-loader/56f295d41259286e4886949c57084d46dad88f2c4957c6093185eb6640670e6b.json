{"ast":null,"code":"import{useState}from\"react\";import{useWorkoutContext}from\"../hooks/useWorkoutContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function WorkoutForm(){const{dispatch}=useWorkoutContext();const[title,setTitle]=useState(\"\");const[load,setLoad]=useState(\"\");const[reps,setReps]=useState(\"\");const[error,setError]=useState(null);const[emptyFields,setEmptyFields]=useState([]);const handleSubmit=async e=>{e.preventDefault();const workout={title,load,reps};const response=await fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/api/workouts\"),{method:\"POST\",body:JSON.stringify(workout),// convert JS object to JSON string\nheaders:{\"Content-Type\":\"application/json\"}});const json=await response.json();if(!response.ok){setError(json.error);setEmptyFields(json.emptyFields);}if(response.ok){setTitle(\"\");setLoad(\"\");setReps(\"\");setError(null);setEmptyFields([]);console.log(\"new workout added\",json);// add new workout to global context state\ndispatch({type:\"CREATE_WORKOUT\",payload:json});}};return/*#__PURE__*/_jsxs(\"form\",{className:\"create\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add a New Workout\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Workout title:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:e=>setTitle(e.target.value),value:title,className:emptyFields.includes(\"title\")?\"error\":\"\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Load (in kg):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:e=>setLoad(e.target.value),value:load,className:emptyFields.includes(\"load\")?\"error\":\"\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Reps:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:e=>setReps(e.target.value),value:reps,className:emptyFields.includes(\"reps\")?\"error\":\"\"}),/*#__PURE__*/_jsx(\"button\",{children:\"Add Workout\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error})]});}export default WorkoutForm;","map":{"version":3,"names":["useState","useWorkoutContext","jsx","_jsx","jsxs","_jsxs","WorkoutForm","dispatch","title","setTitle","load","setLoad","reps","setReps","error","setError","emptyFields","setEmptyFields","handleSubmit","e","preventDefault","workout","response","fetch","concat","process","env","REACT_APP_API_URL","method","body","JSON","stringify","headers","json","ok","console","log","type","payload","className","onSubmit","children","onChange","target","value","includes"],"sources":["C:/C219/mern-workout-app-starter-main/frontend/src/components/WorkoutForm.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useWorkoutContext } from \"../hooks/useWorkoutContext\";\r\n\r\nfunction WorkoutForm() {\r\n  const { dispatch } = useWorkoutContext();\r\n\r\n  const [title, setTitle] = useState(\"\");\r\n  const [load, setLoad] = useState(\"\");\r\n  const [reps, setReps] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n  const [emptyFields, setEmptyFields] = useState([]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const workout = { title, load, reps };\r\n\r\n    const response = await fetch(\r\n      `${process.env.REACT_APP_API_URL}/api/workouts`,\r\n      {\r\n        method: \"POST\",\r\n        body: JSON.stringify(workout), // convert JS object to JSON string\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    );\r\n\r\n    const json = await response.json();\r\n\r\n    if (!response.ok) {\r\n      setError(json.error);\r\n      setEmptyFields(json.emptyFields);\r\n    }\r\n\r\n    if (response.ok) {\r\n      setTitle(\"\");\r\n      setLoad(\"\");\r\n      setReps(\"\");\r\n      setError(null);\r\n      setEmptyFields([]);\r\n      console.log(\"new workout added\", json);\r\n      // add new workout to global context state\r\n      dispatch({ type: \"CREATE_WORKOUT\", payload: json });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form className=\"create\" onSubmit={handleSubmit}>\r\n      <h3>Add a New Workout</h3>\r\n\r\n      <label>Workout title:</label>\r\n      <input\r\n        type=\"text\"\r\n        onChange={(e) => setTitle(e.target.value)}\r\n        value={title}\r\n        className={emptyFields.includes(\"title\") ? \"error\" : \"\"}\r\n      />\r\n\r\n      <label>Load (in kg):</label>\r\n      <input\r\n        type=\"number\"\r\n        onChange={(e) => setLoad(e.target.value)}\r\n        value={load}\r\n        className={emptyFields.includes(\"load\") ? \"error\" : \"\"}\r\n      />\r\n\r\n      <label>Reps:</label>\r\n      <input\r\n        type=\"number\"\r\n        onChange={(e) => setReps(e.target.value)}\r\n        value={reps}\r\n        className={emptyFields.includes(\"reps\") ? \"error\" : \"\"}\r\n      />\r\n\r\n      <button>Add Workout</button>\r\n      {error && <div className=\"error\">{error}</div>}\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default WorkoutForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}